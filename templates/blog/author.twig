{# BLOG AUTHOR PAGE #}
{% extends "_layout" %}

{# SET USER FROM URL #}
{% set user                     = craft.users().id(author).one() %}

{# SET BLOG SECTION BY CURRENT SITE #}
{% set sitePrefix               = currentSite.primary? "" : currentSite.handle ~ "_" %}
{% paginate craft.entries.section(sitePrefix ~ 'blog').authorId(author).limit(20) as pageInfo, blog %}

{# SET HEADER VARIABLES #}
{% set title                    = "Blog" %}
{% set class                    = "blog list" %}

{# SET SEO VALUES #}
{% do seomatic.meta.seoTitle( siteName ~ " Blog - " ~ user ) %}

{% block content %}
{% cache %}
  
  <header class="page-header">
    <h1 class="page-title">
      <a href="{{ siteUrl }}blog">{{ siteName }} Blog</a>
      <span class="sub-title">by {{ user }}</span>
    </h1>
  </header>
  
  <div class="grid-x grid-margin-x">
    <div class="main large-7 cell">
  
      {% for entry in blog %}
        {% include '_partials/blog-excerpt' %}
      {% endfor %}

      {% include '_partials/paginate-list' %}
  
    </div>
  
    {% include 'blog/_sidebar' %}
  
  </div>

{% endcache %}
{% endblock %}