{# SINGLE PAGE NEWSLETTER TEMPLATE #}

{# SET FIRN FROM ENTRY #}
{% set form                     = entry.entryForm %}
  
<header class="page-header">
  <h1 class="page-title">{{ entry.title }}</h1>
</header>

<div class="grid-x grid-margin-x">

  <div class="main large-7 cell cell">

    {{ entry.body }}

    <div class="form-group">

      <!-- Begin Mailchimp Signup Form -->
      <div id="mc_embed_signup">
        <form action="https://teentix.us6.list-manage.com/subscribe/post?u=2cf41cc11a27529f9f5c89d01&amp;id=128e90aeae" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
          <div id="mc_embed_signup_scroll">

            <div class="mc-field-group">
              <label for="mce-EMAIL">Email Address <span class="asterisk">(required)</span>
            </label>
              <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email is required">
            </div>

            <div class="mc-field-group">
              <label for="mce-FNAME">First Name </label>
              <input type="text" value="" name="FNAME" class="" id="mce-FNAME">
            </div>
            <div class="mc-field-group">
              <label for="mce-LNAME">Last Name </label>
              <input type="text" value="" name="LNAME" class="" id="mce-LNAME">
            </div>

            <div id="mce-responses" class="clear">
              <div class="response" id="mce-error-response" style="display:none"></div>
              <div class="response" id="mce-success-response" style="display:none"></div>
            </div>

            <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
            <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_120742e4dc5e154c57db6825d_c51b9e3d2f" tabindex="-1" value=""></div>

            <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button  large"></div>

          </div>
        </form>
      </div>
      <!--End mc_embed_signup-->

    </div>

  </div>

  <div class="sidebar large-4 large-offset-1 cell">
    {{ entry.sidebar }}
  </div>

</div>

<script>
  window.renderFormSuccess = function (form) {
    const successMessage = document.createElement("div");
    successMessage.classList.add("callout", "success");

    const paragraph = document.createElement("p");
    paragraph.classList.add("lead");
    paragraph.appendChild(document.createTextNode("{{ "Thank you for getting in touch. We will get back to you shortly." }}"));

    successMessage.appendChild(paragraph);

    form.insertBefore(successMessage, form.childNodes[0]);
  };

  window.renderFormErrors = (errors, form) => {
    const errorBlock = document.createElement("div");
    errorBlock.classList.add("callout", "error");

    const paragraph = document.createElement("p");
    paragraph.appendChild(document.createTextNode("{{ "There was an issue with your submission! Please review the form and try submitting again." }}"));
    paragraph.classList.add("lead");
    errorBlock.appendChild(paragraph);

    if (errors.length) {
      const errorsList = document.createElement("ul");
      for (let messageIndex = 0; messageIndex < errors.length; messageIndex++) {
        const message = errors[messageIndex];
        const listItem = document.createElement("li");

        listItem.appendChild(document.createTextNode(message));
        errorsList.appendChild(listItem);
      }

      errorBlock.appendChild(errorsList);
    }

    form.insertBefore(errorBlock, form.childNodes[0]);
  };

</script>